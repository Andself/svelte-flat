!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Flat=t()}(this,function(){"use strict";function e(e,t){function n(e){t.onclick(e)}var i=document.createElement("button");i.addEventListener("click",n,!1),i.className="sf-button sf-button--"+(e.status?e.status:"default"),i.disabled=e.disabled;var r=document.createElement("span");i.appendChild(r);var a=document.createTextNode(e.content);return r.appendChild(a),{mount:function(e,t){e.insertBefore(i,t)},update:function(e,t){i.className="sf-button sf-button--"+(t.status?t.status:"default"),i.disabled=t.disabled,a.data=t.content},teardown:function(e){i.removeEventListener("click",n,!1),e&&i.parentNode.removeChild(i)}}}function t(t){function n(e,t,n){for(var r in e)if(r in t){var a=t[r],l=n[r];if(a!==l||"object"===("undefined"==typeof a?"undefined":o(a))){var c=e[r];if(c)for(var d=0;d<c.length;d+=1){var s=c[d];s.__calling||(s.__calling=!0,s.call(i,a,l),s.__calling=!1)}}}}t=t||{};var i=this,r=t.data||{},a={immediate:Object.create(null),deferred:Object.create(null)},l=Object.create(null);this.fire=function(e,t){var n=e in l&&l[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)},this.get=function(e){return e?r[e]:r},this.set=function(e){var t=r;r=Object.assign({},t,e),n(a.immediate,e,t),c&&c.update(e,r),n(a.deferred,e,t)},this._mount=function(e,t){c.mount(e,t)},this.observe=function(e,t,n){var o=n&&n.defer?a.deferred:a.immediate;return(o[e]||(o[e]=[])).push(t),n&&n.init===!1||(t.__calling=!0,t.call(i,r[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=l[e]||(l[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),c.teardown(e!==!1),c=null,r={}},this.root=t.root,this.yield=t.yield;var c=e(r,this);t.target&&this._mount(t.target)}function n(e,t){function n(e){t.onfocus(e)}var i=document.createElement("input");return i.addEventListener("focus",n,!1),i.className="sf-input sf-input--"+(e.status?e.status:"default"),i.placeholder=e.placeholder?e.placeholder:"",i.type=e.type?e.type:"text",i.disabled=e.disabled,i.value=e.value?e.value:"",{mount:function(e,t){e.insertBefore(i,t)},update:function(e,t){i.className="sf-input sf-input--"+(t.status?t.status:"default"),i.placeholder=t.placeholder?t.placeholder:"",i.type=t.type?t.type:"text",i.disabled=t.disabled,i.value=t.value?t.value:""},teardown:function(e){i.removeEventListener("focus",n,!1),e&&i.parentNode.removeChild(i)}}}function i(e){function t(e,t,n){for(var r in e)if(r in t){var a=t[r],l=n[r];if(a!==l||"object"===("undefined"==typeof a?"undefined":o(a))){var c=e[r];if(c)for(var d=0;d<c.length;d+=1){var s=c[d];s.__calling||(s.__calling=!0,s.call(i,a,l),s.__calling=!1)}}}}e=e||{};var i=this,r=e.data||{},a={immediate:Object.create(null),deferred:Object.create(null)},l=Object.create(null);this.fire=function(e,t){var n=e in l&&l[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)},this.get=function(e){return e?r[e]:r},this.set=function(e){var n=r;r=Object.assign({},n,e),t(a.immediate,e,n),c&&c.update(e,r),t(a.deferred,e,n)},this._mount=function(e,t){c.mount(e,t)},this.observe=function(e,t,n){var o=n&&n.defer?a.deferred:a.immediate;return(o[e]||(o[e]=[])).push(t),n&&n.init===!1||(t.__calling=!0,t.call(i,r[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=l[e]||(l[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),c.teardown(e!==!1),c=null,r={}},this.root=e.root,this.yield=e.yield;var c=n(r,this);e.target&&this._mount(e.target)}function r(e,t){function n(e){t.togglePlay()}var i=document.createElement("div");i.className="sf-video",i.style.cssText="width: "+e.width+"px; height: "+e.height+"px;";var r=document.createElement("video");t.refs.video=r,r.width=e.width,r.height=e.height,r.src=e.src,r.loop=e.loop,i.appendChild(r),i.appendChild(document.createTextNode("\n  "));var a=document.createElement("div");a.className="sf-video-controls",i.appendChild(a);var o=document.createElement("label");o.className="sf-video-controls--play",a.appendChild(o);var l=document.createElement("input");t.refs.togglePlay=l,l.type="checkbox",l.addEventListener("change",n,!1),o.appendChild(l),o.appendChild(document.createTextNode("\n      "));var c=document.createElement("span");return o.appendChild(c),{mount:function(e,t){e.insertBefore(i,t)},update:function(e,t){i.style.cssText="width: "+t.width+"px; height: "+t.height+"px;",r.width=t.width,r.height=t.height,r.src=t.src,r.loop=t.loop},teardown:function(e){t.refs.video===r&&(t.refs.video=null),t.refs.togglePlay===l&&(t.refs.togglePlay=null),l.removeEventListener("change",n,!1),e&&i.parentNode.removeChild(i)}}}function a(e){function t(e,t,i){for(var r in e)if(r in t){var a=t[r],l=i[r];if(a!==l||"object"===("undefined"==typeof a?"undefined":o(a))){var c=e[r];if(c)for(var d=0;d<c.length;d+=1){var s=c[d];s.__calling||(s.__calling=!0,s.call(n,a,l),s.__calling=!1)}}}}e=e||{};var n=this;this.refs={};var i=e.data||{},a={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)},this.get=function(e){return e?i[e]:i},this.set=function(e){var n=i;i=Object.assign({},n,e),t(a.immediate,e,n),d&&d.update(e,i),t(a.deferred,e,n)},this._mount=function(e,t){d.mount(e,t)},this.observe=function(e,t,r){var o=r&&r.defer?a.deferred:a.immediate;return(o[e]||(o[e]=[])).push(t),r&&r.init===!1||(t.__calling=!0,t.call(n,i[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),d.teardown(e!==!1),d=null,i={}},this.root=e.root,this.yield=e.yield;var d=r(i,this);e.target&&this._mount(e.target),e.root?e.root.__renderHooks.push({fn:l.onrender,context:this}):l.onrender.call(this)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){return{onrender:function(){var e=this.refs.video,t=this.refs.togglePlay;e.onended=function(){t.checked=!1}},methods:{togglePlay:function(){var e=this.refs.video;e.paused?e.play():e.pause()}}}}();a.prototype=l.methods;var c={Button:t,Input:i,Video:a};return c});
