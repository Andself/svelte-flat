!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Flat=t()}(this,function(){"use strict";function e(e,t){function n(e){t.onclick(e)}var i=document.createElement("button");i.addEventListener("click",n,!1),i.className="sf-button sf-button--"+(e.status?e.status:"default"),i.disabled=e.disabled;var a=document.createElement("span");i.appendChild(a);var r=document.createTextNode(e.content);return a.appendChild(r),{mount:function(e,t){e.insertBefore(i,t)},update:function(e,t){i.className="sf-button sf-button--"+(t.status?t.status:"default"),i.disabled=t.disabled,r.data=t.content},teardown:function(e){i.removeEventListener("click",n,!1),e&&i.parentNode.removeChild(i)}}}function t(t){function n(e,t,n){for(var a in e)if(a in t){var r=t[a],c=n[a];if(r!==c||"object"===("undefined"==typeof r?"undefined":o(r))){var l=e[a];if(l)for(var d=0;d<l.length;d+=1){var u=l[d];u.__calling||(u.__calling=!0,u.call(i,r,c),u.__calling=!1)}}}}t=t||{};var i=this,a=t.data||{},r={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)},this.get=function(e){return e?a[e]:a},this.set=function(e){var t=a;a=Object.assign({},t,e),n(r.immediate,e,t),l&&l.update(e,a),n(r.deferred,e,t)},this._mount=function(e,t){l.mount(e,t)},this.observe=function(e,t,n){var o=n&&n.defer?r.deferred:r.immediate;return(o[e]||(o[e]=[])).push(t),n&&n.init===!1||(t.__calling=!0,t.call(i,a[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),l.teardown(e!==!1),l=null,a={}},this.root=t.root,this.yield=t.yield;var l=e(a,this);t.target&&this._mount(t.target)}function n(e,t){function n(e){t.onfocus(e)}var i=document.createElement("input");return i.addEventListener("focus",n,!1),i.className="sf-input sf-input--"+(e.status?e.status:"default"),i.placeholder=e.placeholder?e.placeholder:"",i.type=e.type?e.type:"text",i.disabled=e.disabled,i.value=e.value?e.value:"",{mount:function(e,t){e.insertBefore(i,t)},update:function(e,t){i.className="sf-input sf-input--"+(t.status?t.status:"default"),i.placeholder=t.placeholder?t.placeholder:"",i.type=t.type?t.type:"text",i.disabled=t.disabled,i.value=t.value?t.value:""},teardown:function(e){i.removeEventListener("focus",n,!1),e&&i.parentNode.removeChild(i)}}}function i(e){function t(e,t,n){for(var a in e)if(a in t){var r=t[a],c=n[a];if(r!==c||"object"===("undefined"==typeof r?"undefined":o(r))){var l=e[a];if(l)for(var d=0;d<l.length;d+=1){var u=l[d];u.__calling||(u.__calling=!0,u.call(i,r,c),u.__calling=!1)}}}}e=e||{};var i=this,a=e.data||{},r={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)},this.get=function(e){return e?a[e]:a},this.set=function(e){var n=a;a=Object.assign({},n,e),t(r.immediate,e,n),l&&l.update(e,a),t(r.deferred,e,n)},this._mount=function(e,t){l.mount(e,t)},this.observe=function(e,t,n){var o=n&&n.defer?r.deferred:r.immediate;return(o[e]||(o[e]=[])).push(t),n&&n.init===!1||(t.__calling=!0,t.call(i,a[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),l.teardown(e!==!1),l=null,a={}},this.root=e.root,this.yield=e.yield;var l=n(a,this);e.target&&this._mount(e.target)}function a(e,t){function n(e){t.togglePlay()}var i=document.createElement("div");i.className="sf-video",i.style.cssText="width: "+e.width+"px; height: "+e.height+"px;";var a=document.createElement("video");t.refs.video=a,a.width=e.width,a.height=e.height,a.src=e.src,a.loop=e.loop,i.appendChild(a),i.appendChild(document.createTextNode("\n  "));var r=document.createElement("div");r.className="sf-video-controls",i.appendChild(r);var o=document.createElement("label");o.className="sf-video-controls--play",r.appendChild(o);var c=document.createElement("input");c.type="checkbox",c.addEventListener("change",n,!1),o.appendChild(c),o.appendChild(document.createTextNode("\n      "));var l=document.createElement("span");return o.appendChild(l),{mount:function(e,t){e.insertBefore(i,t)},update:function(e,t){i.style.cssText="width: "+t.width+"px; height: "+t.height+"px;",a.width=t.width,a.height=t.height,a.src=t.src,a.loop=t.loop},teardown:function(e){t.refs.video===a&&(t.refs.video=null),c.removeEventListener("change",n,!1),e&&i.parentNode.removeChild(i)}}}function r(e){function t(e,t,i){for(var a in e)if(a in t){var r=t[a],c=i[a];if(r!==c||"object"===("undefined"==typeof r?"undefined":o(r))){var l=e[a];if(l)for(var d=0;d<l.length;d+=1){var u=l[d];u.__calling||(u.__calling=!0,u.call(n,r,c),u.__calling=!1)}}}}e=e||{};var n=this;this.refs={};var i=e.data||{},r={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)},this.get=function(e){return e?i[e]:i},this.set=function(e){var n=i;i=Object.assign({},n,e),t(r.immediate,e,n),l&&l.update(e,i),t(r.deferred,e,n)},this._mount=function(e,t){l.mount(e,t)},this.observe=function(e,t,a){var o=a&&a.defer?r.deferred:r.immediate;return(o[e]||(o[e]=[])).push(t),a&&a.init===!1||(t.__calling=!0,t.call(n,i[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),l.teardown(e!==!1),l=null,i={}},this.root=e.root,this.yield=e.yield;var l=a(i,this);e.target&&this._mount(e.target)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){return{methods:{togglePlay:function(){var e=this.refs.video;e.paused?e.play():e.pause()}}}}();r.prototype=c.methods;var l={Button:t,Input:i,Video:r};return l});
